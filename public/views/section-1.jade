
doctype html
html(lang="en-us")
    head
        meta(charset="utf-8")
        title= title
        meta(name="description", content="HTML5 Boilerplate is a professional front-end template for building fast, robust, and adaptable web apps or sites. Spend more time developing and less time reinventing the wheel.")
        meta(name="viewport" content="width=device-width, initial-scale=1")
        link(rel="apple-touch-icon" href="apple-touch-icon.png")
        link(href='https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz:300' rel='stylesheet' type='text/css')

        link(rel="stylesheet", href="/css/style.css")
        script( language="javascript" type="text/javascript" src="js/jquery-2.1.3.min.js")
        script(language="javascript" type="text/javascript").
            var thisPage = "#{title}",
                session = "#{sess}";

                console.log("title: " + thisPage + " sess: " + session);
        script( language="javascript" type="text/javascript" src="js/p5.js")
        script( language="javascript" type="text/javascript" src="js/p5.dom.js")
        script( language="javascript" type="text/javascript" src="js/equations.js")
        script( language="javascript" type="text/javascript" src="js/Tot.js")
        script( language="javascript" type="text/javascript" src="js/TotSystem.js")
        script(type='text/javascript' src="js/sketch.js")
        script(type='text/javascript').
            $(document).ready(function(){
                var $sideBar = $('#side-bar'),
                    $sideBarToggle = $('#side-bar-toggle');

                $("#submit").click(function(){
                    sessionTots = TotsUno;
                    /*
                    * Perform some validation here.
                    */
                    $.post("/update_sketch",{ sessionTots: sessionTots }, function(data){
                        console.log('data: ' + data);     
                        if(data==='done'){
                            window.location.href="/sketch";
                        }
                    });
                });
                $sideBarToggle.click(function(){
                    console.log('open!');
                    $sideBar.toggleClass('open');
                });
            });
    body
        div(class="main-container")
            div( class="side-bar")
                div( class="side-bar-header")
                    h1(id="side-bar-toggle" class="header")= title
                ul( id="control-panel" class="control-panel")
                    li( class="tier-1-menu-item")
                        label( for="social-menu-toggle" class="tier-1-label") Social
                        input( id="social-menu-toggle" name="social-menu-toggle" type="checkbox" class="")
                        ul( class="tier-2-control-panel social")
                    li( class="tier-1-menu-item")
                        label( for="self-menu-toggle" class="tier-1-label") Self
                        input( id="self-menu-toggle" name="self-menu-toggle" type="checkbox" class="")
                        ul( class="tier-2-control-panel self")
                            li( class="tier-2-control switch item")
                                h3( class="control-header") Social Behavior
                                div( class="switch-label")
                                    span( class="label-contents") Grouping
                                div( id="pair-slider" class="switch-container")
                                div(class="switch-label")
                                    span( class="label-contents") Pairing
                            li( class="tier-2-control item")
                                h3( class="control-header") Personality
                                div( class="control-label")
                                    span( class="label-contents") Conform
                                div( id="diversity-slider" class="slider-container")
                                div( class="control-label")
                                    span( class="label-contents") Express
                            li( class="tier-2-control item")
                                h3( class="control-header") Sensitivity
                                div( class="control-label")
                                    span( class="label-contents") Dull
                                div( id="sensitivity-slider" class="slider-container")
                                div( class="control-label")
                                    span( class="label-contents") Acute
                            li( class="tier-2-control item")
                                h3( class="control-header") Sociability
                                div( class="control-label")
                                    span( class="label-contents") Dull
                                div( id="sensitivity-slider" class="slider-container")
                                div( class="control-label")
                                    span( class="label-contents") Acute
                            li( id="active-tot-container" class="tier-2-control item active-tot")
                                div( class="button-label")
                                    span( class="label-contents") Steer?
                                div( id="active-tot-button" class="button-container")
                            li( class="active-tot tier-2-control tip")
                                p( class="control-tip-copy") 
                                    em Click one to designate a protagonist. Use arrow keys to steer.
            div(id="sketch-container" class="sketch-container")
            button(class="next-button" id="submit" type="submit")